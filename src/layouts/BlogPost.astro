---
import type { CollectionEntry } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import FormattedDate from '../components/FormattedDate.astro';
import { Image } from 'astro:assets';

type Props = CollectionEntry<'blog'>['data'];

const { title, description, pubDate, updatedDate, heroImage, tags, location } = Astro.props;
---

<html lang="en" class="scroll-smooth">
	<head>
		<BaseHead title={title} description={description} />
	</head>

	<body class="bg-gray-50 text-gray-900 antialiased min-h-screen flex flex-col">
		<Header />
		<main class="flex-grow w-full max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12 animate-fade-in-up">
			<article class="prose prose-lg prose-slate mx-auto prose-img:rounded-2xl prose-img:shadow-xl prose-a:text-blue-600 hover:prose-a:text-blue-500 max-w-none">
				<div class="mb-12 text-center max-w-3xl mx-auto">
					<div class="mb-6 text-gray-500 text-sm font-medium tracking-wide uppercase">
						<FormattedDate date={pubDate} />
						{
							updatedDate && (
								<div class="italic mt-1 text-xs">
									Updated <FormattedDate date={updatedDate} />
								</div>
							)
						}
                        {location && (
                            <div class="mt-2 flex items-center justify-center gap-1 text-gray-500 normal-case">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                    <circle cx="12" cy="10" r="3"></circle>
                                </svg>
                                <span>{location}</span>
                            </div>
                        )}
					</div>
					<h1 class="text-4xl font-bold tracking-tight text-gray-900 sm:text-5xl mb-6 leading-tight">{title}</h1>
                    
                    {tags && tags.length > 0 && (
                        <div class="flex flex-wrap gap-2 justify-center mt-6">
                            {tags.map((tag) => (
                                <a href={`/tags/${tag}`} class="px-3 py-1 rounded-full bg-gray-100 text-gray-600 text-sm hover:bg-gray-200 transition-colors no-underline font-medium">
                                    #{tag}
                                </a>
                            ))}
                        </div>
                    )}
				</div>

				{heroImage && (
                    <div class="mb-12 overflow-hidden rounded-2xl shadow-lg aspect-[16/9]">
                        <Image 
                            width={1020} 
                            height={510} 
                            src={heroImage} 
                            alt="" 
                            class="w-full h-full object-cover transform transition-transform duration-700 hover:scale-105"
                        />
                    </div>
                )}

				<div class="mt-8 max-w-3xl mx-auto">
					<slot />
				</div>
			</article>
		</main>
		<Footer />
	</body>
</html>
